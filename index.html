<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  </head>
  <body>
    <!-- Bouton de téléchargement -->
    <button id="downloadBtn" style="position:absolute; top:10px; left:10px; z-index:999;">
      telecharger le modele 3d
    </button>

    <!-- Bouton arrêt / reprise rotation -->
    <button id="toggleRotationBtn" style="position:absolute; top:50px; left:10px; z-index:999;">
      arrêter la rotation
    </button>

    <a-scene shadow="type: pcfsoft">
      <a-entity id="global"
                rotation="0 0 0"
                animation="property: rotation; to: 0 359 0; dur: 20000; loop: true; easing: linear">
        <a-entity id="jardin1" obj-model="./assets/jardin/jardin1.obj"></a-entity>

        <a-entity id="garage" gltf-model="./lycée.glb" scale="0.02 0.02 0.02"
                  rotation="0 0 0" shadow="cast: true; receive: true"></a-entity>

        <a-entity id="position" light="angle: 180; color: #EEE; type: spot; castShadow: true"
                  position="-0.34746 0.586 -0.05768"
                  animation="dir: alternate; dur: 400; easing: linear; loop: true; property: position; to: 0 0.6 0"
                  rotation="180 0 0"></a-entity>

        <a-image id="fleche1" src="./fleche.jpg" position="-0.27458 0.492 0.08765"
                 material="blending: multiply" rotation="90 -0.422 0"
                 scale="0.80508 0.101 1"></a-image>

        <a-image id="fleche2" src="./fleche.jpg" position="-0.38867 0.49463 -0.06351"
                 material="blending: multiply" scale="0.69796 0.09621 1"
                 rotation="90 -89.887 0"></a-image>

        <a-text id="30,40" value="30,40" position="-0.35674 0.51202 -0.22441"
                scale="0.5 0.5 0.5" rotation="-90 0 0"></a-text>

        <a-text id="20,90" value="29,90" position="-0.22705 0.51875 0.01487"
                scale="0.5 0.5 0.5"
                rotation="-75.86 179.91 -179.99"></a-text>

        <a-text id="moi"
                value="realisation par \n Paglierusco Alexis 1pro4"
                text="color: #595959"
                position="1.69052 0.44462 -1.11078"
                rotation="-87.61 -95.17 9.39"
                scale="0.5 0.5 0.5"></a-text>
      </a-entity>
    </a-scene>
    
    <script>
      // Téléchargement
      const downloadBtn = document.getElementById('downloadBtn');
      downloadBtn.addEventListener('click', () => {
        const link = document.createElement('a');
        link.href = './lycée.glb';
        link.download = 'lycée.glb';
        link.click();
      });

      // Arrêt / reprise rotation
      const toggleBtn = document.getElementById('toggleRotationBtn');
      const globalEntity = document.getElementById('global');
      let rotationActive = true;

      toggleBtn.addEventListener('click', () => {
        if (rotationActive) {
          globalEntity.removeAttribute('animation');
          toggleBtn.textContent = "relancer la rotation";
        } else {
          globalEntity.setAttribute('animation',
            'property: rotation; to: 0 359 0; dur: 20000; loop: true; easing: linear'
          );
          toggleBtn.textContent = "arrêter la rotation";
        }
        rotationActive = !rotationActive;
      });
    </script>
  </body>
</html>
